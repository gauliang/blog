---
title: "Git Rebase"
date: 2020-09-13T09:39:21+08:00
draft: true
Description: "在 Git 中整合来自不同分支的修改主要有两种方法：merge 以及 rebase。rebase 命令将提交到某一分支上的所有修改都移至另一分支上。"
type: "posts"    # posts | series
tags: [devops, git, rebase]
series: []
author: "Gl"
cover: "cover.jpg"     # image name
---

在 Git 中整合来自不同分支的修改主要有两种方法：**merge** 以及 **rebase**。
这两种整合方法的最终结果没有任何区别，但 rebase 使得提交历史更加整洁。
你在查看一个经过 rebase 的分支历史记录时会发现，尽管实际的开发工作是并行的， 但它们看上去就像是串行的一样，
提交历史是一条直线没有分叉。一般我们这样做的目的是为了确保在向远程分支推送时能保持提交历史的整洁。

## 执行流程

Rebase 背后的执行流程如下：

1. 找出 **当前分支** 和 **rebase 目标分支** 的最近共同祖先节点；
1. 对比当前分支相对于该祖先的历次提交，提取相应的修改并存为临时文件；
1. 定位目标分支最后更新节点；
1. 将之前另存为临时文件的修改依序应用。
1. 在目标分支进行 **快进合并**

**rebase** 将一系列提交按照原有次序依次应用到另一分支上，这与 **merge** 直接把最终结果合并在一起创建新的提交不同。
这也意味着，**rebase** 修改了提交历史。

## 应用场景

鉴于上述流程，常规的应用场景主要包括以下几类：

1. 主要是通过 rebase 实现线性的项目历史记录；
1. 通过 rebase 整合来自其他分支（如 master）的最新变化。每当您想查看项目进展情况时，使用Git合并引入上游更改都会导致多余的合并提交，rebase 不存在这些问题；
1. 修改提交历史。

## 修改提交历史

常用的历史修改命令有`git rebase`、`git commit --amend` 和 `git reflog`，这里重点介绍 `git rebase`。

## Rebase 风险

果提交存在于你的仓库之外，而别人可能基于这些提交进行开发，那么不要执行变基。
